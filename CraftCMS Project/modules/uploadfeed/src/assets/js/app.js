(function(){"use strict";var e={1727:function(e,t,i){var a=i(144),s=function(){var e=this,t=e._self._c;return t("div",[t("NavBar"),t("UploadView")],1)},o=[],l=function(){var e=this;e._self._c;return e._m(0)},n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-full h-1/5 py-8 navbar",attrs:{"data-cy":"navbar"}},[t("h3",{staticClass:"ml-32 text-2xl text-white navbar__brand",attrs:{"data-cy":"header-title"}},[e._v(" MULTIPLE EVENTS UPLOADER ")])])}],r={name:"NavBar"},c=r,d=i(3736),u=(0,d.Z)(c,l,n,!1,null,null,null),h=u.exports,m=i(6190),p=i(9582),f=i(4886),g=i(1625),v=i(4324),b=i(4525),x=i(5200),w=i(5375),I=function(){var e=this,t=e._self._c;return t("div",[t(p.Z,{staticClass:"mx-auto",attrs:{"max-width":"944",outlined:""}},[t(b.Z,{attrs:{"three-line":""}},[t(x.km,[t(x.V9,{staticClass:"text-h5 mb-1"},[e._v(" Upload Event Feed ")]),t(x.oZ),t(w.Z,{attrs:{label:"Select Feed",items:e.feeds,"item-text":"name","item-value":"triggerUrl"},model:{value:e.selectedFeed,callback:function(t){e.selectedFeed=t},expression:"selectedFeed"}}),t(g.Z,{attrs:{rules:e.rules,accept:".csv",disabled:!e.selectedFeed,placeholder:"Select your CSV feed file","prepend-icon":"mdi-paperclip",label:"File input"},on:{change:e.prepareFile},model:{value:e.chosenFile,callback:function(t){e.chosenFile=t},expression:"chosenFile"}})],1)],1),t(f.h7,[t(m.Z,{staticClass:"ma-2 white--text",attrs:{loading:e.loading,disabled:!e.uploadFile,depressed:"",color:"blue-grey"},on:{click:e.submitFile}},[e._v(" Upload "),t(v.Z,{attrs:{right:"",dark:""}},[e._v(" mdi-cloud-upload ")])],1)],1)],1),t("notification-dialog",{attrs:{"data-cy":"modal-information",responseData:e.responseData}})],1)},Z=[],y=(i(8675),i(3408),i(4590),i(9669)),_=i.n(y),F=i(4105),k=i(629);a.ZP.use(k.ZP);var D=new k.ZP.Store({state:{authenticationEnabled:"authentication-enabled-yes",endpoints:{api:"http://localhost:8081/",login:"http://endpoint-login-ip:endpoint-login-port/login"},user:{isAuthenticated:!1,name:"",idToken:"",accessToken:""},showNotificationDialog:!1},getters:{showNotificationDialog(e){return e.showNotificationDialog}},mutations:{LOGOUT(e){e.user.isAuthenticated=!1,e.user.name="",e.user.idToken="",e.user.accessToken=""},LOGIN(e,t){e.user.isAuthenticated=!0,e.user.idToken=t.idToken,e.user.accessToken=t.accessToken},SETNAME(e,t){e.user.name=t.name},TOGGLE_NOTIFICATION_DIALOG(e,{value:t}){e.showNotificationDialog=t}},actions:{toggleNotificationDialog({commit:e},{value:t}){e("TOGGLE_NOTIFICATION_DIALOG",{value:t})}},modules:{}}),T=i(9930),O=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex justify-center",attrs:{"data-app":""}},[t(T.Z,{attrs:{width:"500"},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[t("div",{staticClass:"p-3 h-12 bg-white rounded-xl shadow-xl"},[t("div",{staticClass:"flex gap-2"},[t("span",{staticClass:"ml-1 icon_info",attrs:{"data-cy":"modal-information-icon"}}),t("p",{staticClass:"text-md",attrs:{"data-cy":"modal-information-text"}},[e._v(" "+e._s(e.responseData)+" ")])])])])],1)},C=[],N={name:"NotificationDialog",props:{responseData:String},data(){return{isShow:!1}},computed:(0,k.Se)({showNotificationDialog:"showNotificationDialog"}),watch:{showNotificationDialog(e){this.isShow=e}},methods:{toggleDialog(e){D.dispatch("toggleNotificationDialog",{value:e})}}},S=N,P=(0,d.Z)(S,O,C,!1,null,null,null),A=P.exports,E={name:"UploadView",components:{NotificationDialog:A},data(){return{uploaded:!1,selectedFeed:null,feeds:[],chosenFile:null,uploadFile:null,loading:!1,allowedFileType:["text/csv"],rules:[e=>!e||e.size<2e6||"File size should be less than 2 MB!",e=>!e||this.allowedFileType.includes(e.type)||"File type can be csv!"],responseData:""}},mounted(){const e={"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"};_().get("feeds",{headers:e}).then((e=>{e.data.error?console.log(e):this.feeds=e.data.filter((e=>e.feedUrl.includes("@storage/feed/event-feed.csv")))})).catch((e=>{this.responseData=e.message,this.showNotif()}))},watch:{uploaded(e){e&&this.selectedFeed&&_().get(this.selectedFeed).then((e=>{console.log(e),this.selectedFeed=null})).catch((e=>{this.selectedFeed=null,console.log("hes error",e)}))}},methods:{submitFile(){console.log(window.location.hostname),this.loading=!0;const e=new FormData;e.append("file",this.uploadFile);const t={"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"};_().post("feed",e,{headers:t}).then((e=>{setTimeout((()=>{e.data.error?(console.log(e),this.uploaded=!1,this.responseData=e.data.error):(console.log(e),this.uploaded=!0,this.responseData=e.data.message),this.showNotif()}),1e3)})).catch((e=>{console.error(e),this.responseData=e.message,this.uploaded=!1,this.showNotif()}))},prepareFile(){if(this.chosenFile){if("text/csv"===this.chosenFile.type||"application/json"===this.chosenFile.type)this.uploadFile=this.chosenFile,console.log(this.uploadFile);else if("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===this.chosenFile.type){const e=this.chosenFile.name.replace(/\.[^/.]+$/,".json"),t=new FileReader;t.readAsArrayBuffer(this.chosenFile),t.onload=t=>{const i=new Uint8Array(t.target.result),a=F.ij(i,{type:"array",raw:!0,cellFormula:!1}),s=a.SheetNames[0],o=F.P6.sheet_to_json(a.Sheets[s]),l=JSON.stringify(o),n=new Blob([l],{type:"application/json"}),r=new File([n],e);this.uploadFile=r}}}else this.uploadFile=null},showNotif(){this.loading=!1,this.chosenFile=null,this.uploadFile=null,D.dispatch("toggleNotificationDialog",{value:!0}),setTimeout((()=>D.dispatch("toggleNotificationDialog",{value:!1})),4e3)}}},j=E,U=(0,d.Z)(j,I,Z,!1,null,null,null),L=U.exports,G={components:{NavBar:h,UploadView:L}},B=G,$=(0,d.Z)(B,s,o,!1,null,null,null),M=$.exports,V=i(8345),z=i(266),R=i(2118),H=i(1641),K=i(9223),J=i(1713),q=i(3687),W=i(7808),Y=i(1783),Q=i(7953),X=function(){var e=this,t=e._self._c;return t(H.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,"sort-by":"calories"},scopedSlots:e._u([{key:"top",fn:function(){return[t(Y.Z,{attrs:{flat:""}},[t(Q.qW,[e._v("UPLOAD FEED")]),t(K.Z,{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t(q.Z),t(T.Z,{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function({on:i,attrs:a}){return[t(m.Z,e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",a,!1),i),[e._v(" Refresh ")])]}}],null,!0),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(p.Z,[t(f.EB,[t("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),t(f.ZB,[t(R.Z,[t(J.Z,[t(z.Z,{attrs:{cols:"12",sm:"6",md:"4"}},[t(W.Z,{attrs:{label:"Dessert name"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),t(z.Z,{attrs:{cols:"12",sm:"6",md:"4"}},[t(W.Z,{attrs:{label:"Calories"},model:{value:e.editedItem.calories,callback:function(t){e.$set(e.editedItem,"calories",t)},expression:"editedItem.calories"}})],1),t(z.Z,{attrs:{cols:"12",sm:"6",md:"4"}},[t(W.Z,{attrs:{label:"Fat (g)"},model:{value:e.editedItem.fat,callback:function(t){e.$set(e.editedItem,"fat",t)},expression:"editedItem.fat"}})],1),t(z.Z,{attrs:{cols:"12",sm:"6",md:"4"}},[t(W.Z,{attrs:{label:"Carbs (g)"},model:{value:e.editedItem.carbs,callback:function(t){e.$set(e.editedItem,"carbs",t)},expression:"editedItem.carbs"}})],1),t(z.Z,{attrs:{cols:"12",sm:"6",md:"4"}},[t(W.Z,{attrs:{label:"Protein (g)"},model:{value:e.editedItem.protein,callback:function(t){e.$set(e.editedItem,"protein",t)},expression:"editedItem.protein"}})],1)],1)],1)],1),t(f.h7,[t(q.Z),t(m.Z,{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" Cancel ")]),t(m.Z,{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v(" Save ")])],1)],1)],1),t(T.Z,{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[t(p.Z,[t(f.EB,{staticClass:"text-h5"},[e._v("Are you sure you want to delete this item?")]),t(f.h7,[t(q.Z),t(m.Z,{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancel")]),t(m.Z,{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("OK")]),t(q.Z)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:i}){return[t(v.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(i)}}},[e._v(" mdi-pencil ")]),t(v.Z,{attrs:{small:""},on:{click:function(t){return e.deleteItem(i)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[t(m.Z,{attrs:{color:"primary"},on:{click:e.initialize}},[e._v(" Reset ")])]},proxy:!0}],null,!0)})},ee=[],te=(i(7658),{name:"NewUploadView",data:()=>({dialog:!1,dialogDelete:!1,headers:[{text:"Dessert (100g serving)",align:"start",sortable:!1,value:"name"},{text:"Calories",value:"calories"},{text:"Fat (g)",value:"fat"},{text:"Carbs (g)",value:"carbs"},{text:"Protein (g)",value:"protein"},{text:"Actions",value:"actions",sortable:!1}],desserts:[],editedIndex:-1,editedItem:{name:"",calories:0,fat:0,carbs:0,protein:0},defaultItem:{name:"",calories:0,fat:0,carbs:0,protein:0}}),computed:{formTitle(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog(e){e||this.close()},dialogDelete(e){e||this.closeDelete()}},created(){this.initialize()},methods:{initialize(){this.desserts=[{name:"Frozen Yogurt",calories:159,fat:6,carbs:24,protein:4},{name:"Ice cream sandwich",calories:237,fat:9,carbs:37,protein:4.3},{name:"Eclair",calories:262,fat:16,carbs:23,protein:6},{name:"Cupcake",calories:305,fat:3.7,carbs:67,protein:4.3},{name:"Gingerbread",calories:356,fat:16,carbs:49,protein:3.9},{name:"Jelly bean",calories:375,fat:0,carbs:94,protein:0},{name:"Lollipop",calories:392,fat:.2,carbs:98,protein:0},{name:"Honeycomb",calories:408,fat:3.2,carbs:87,protein:6.5},{name:"Donut",calories:452,fat:25,carbs:51,protein:4.9},{name:"KitKat",calories:518,fat:26,carbs:65,protein:7}]},editItem(e){this.editedIndex=this.desserts.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem(e){this.editedIndex=this.desserts.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm(){this.desserts.splice(this.editedIndex,1),this.closeDelete()},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},closeDelete(){this.dialogDelete=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},save(){this.editedIndex>-1?Object.assign(this.desserts[this.editedIndex],this.editedItem):this.desserts.push(this.editedItem),this.close()}}}),ie=te,ae=(0,d.Z)(ie,X,ee,!1,null,null,null),se=ae.exports;a.ZP.use(V.ZP);const oe=[{path:"/",name:"upload",component:L},{path:"/new",name:"newUpload",component:se}],le=new V.ZP({mode:"history",base:"/",routes:oe});var ne=le,re=i(1705);a.ZP.use(re.Z);var ce=new re.Z({});new a.ZP({router:ne,store:D,vuetify:ce,render:e=>e(M)}).$mount("#app")}},t={};function i(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,i),o.exports}i.m=e,function(){var e=[];i.O=function(t,a,s,o){if(!a){var l=1/0;for(d=0;d<e.length;d++){a=e[d][0],s=e[d][1],o=e[d][2];for(var n=!0,r=0;r<a.length;r++)(!1&o||l>=o)&&Object.keys(i.O).every((function(e){return i.O[e](a[r])}))?a.splice(r--,1):(n=!1,o<l&&(l=o));if(n){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[a,s,o]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,o,l=a[0],n=a[1],r=a[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(s in n)i.o(n,s)&&(i.m[s]=n[s]);if(r)var d=r(i)}for(t&&t(a);c<l.length;c++)o=l[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(d)},a=self["webpackChunkmulti_event_upload"]=self["webpackChunkmulti_event_upload"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=i.O(void 0,[998],(function(){return i(1727)}));a=i.O(a)})();
//# sourceMappingURL=app.347658a5.js.map